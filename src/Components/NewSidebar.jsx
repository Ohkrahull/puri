import React, { useState } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import Logo from "../Images/logo.png";

const NewSideBar = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const [isActive, setIsActive] = useState(location.pathname);

  const handleNavClick = (path) => {
    setIsActive(path);
  };

  const handleLogout = () => {
    navigate('/login');
  };

  const navItems = [
    { path: '/', icon: 'dashboard', label: 'Dashboard' },
    { path: '/booking', icon: 'calendar', label: 'Bookings' },
    { path: '/feedback', icon: 'feedback', label: 'Feedback' },
    { path: '/special_request', icon: 'special_request', label: 'Special Request' },
    { path: '/document', icon: 'document', label: 'Documents' },
    { path: '/construction', icon: 'construction', label: 'Construction Update' },
    { path: '/user', icon: 'user', label: 'Users' },
    { path: '/referrals', icon: 'referrals', label: 'Referrals' },
    { path: '/support', icon: 'support', label: 'Support' },
  ];

  const renderIcon = (iconName) => {
    const icons = {
      dashboard: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 3.75H5.25C4.85218 3.75 4.47064 3.90804 4.18934 4.18934C3.90804 4.47064 3.75 4.85218 3.75 5.25V9.75C3.75 10.1478 3.90804 10.5294 4.18934 10.8107C4.47064 11.092 4.85218 11.25 5.25 11.25H9.75C10.1478 11.25 10.5294 11.092 10.8107 10.8107C11.092 10.5294 11.25 10.1478 11.25 9.75V5.25C11.25 4.85218 11.092 4.47064 10.8107 4.18934C10.5294 3.90804 10.1478 3.75 9.75 3.75ZM9.75 9.75H5.25V5.25H9.75V9.75ZM18.75 3.75H14.25C13.8522 3.75 13.4706 3.90804 13.1893 4.18934C12.908 4.47064 12.75 4.85218 12.75 5.25V9.75C12.75 10.1478 12.908 10.5294 13.1893 10.8107C13.4706 11.092 13.8522 11.25 14.25 11.25H18.75C19.1478 11.25 19.5294 11.092 19.8107 10.8107C20.092 10.5294 20.25 10.1478 20.25 9.75V5.25C20.25 4.85218 20.092 4.47064 19.8107 4.18934C19.5294 3.90804 19.1478 3.75 18.75 3.75ZM18.75 9.75H14.25V5.25H18.75V9.75ZM9.75 12.75H5.25C4.85218 12.75 4.47064 12.908 4.18934 13.1893C3.90804 13.4706 3.75 13.8522 3.75 14.25V18.75C3.75 19.1478 3.90804 19.5294 4.18934 19.8107C4.47064 20.092 4.85218 20.25 5.25 20.25H9.75C10.1478 20.25 10.5294 20.092 10.8107 19.8107C11.092 19.5294 11.25 19.1478 11.25 18.75V14.25C11.25 13.8522 11.092 13.4706 10.8107 13.1893C10.5294 12.908 10.1478 12.75 9.75 12.75ZM9.75 18.75H5.25V14.25H9.75V18.75ZM18.75 12.75H14.25C13.8522 12.75 13.4706 12.908 13.1893 13.1893C12.908 13.4706 12.75 13.8522 12.75 14.25V18.75C12.75 19.1478 12.908 19.5294 13.1893 19.8107C13.4706 20.092 13.8522 20.25 14.25 20.25H18.75C19.1478 20.25 19.5294 20.092 19.8107 19.8107C20.092 19.5294 20.25 19.1478 20.25 18.75V14.25C20.25 13.8522 20.092 13.4706 19.8107 13.1893C19.5294 12.908 19.1478 12.75 18.75 12.75ZM18.75 18.75H14.25V14.25H18.75V18.75Z" fill="#4B5563"/></svg>,
      calendar: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.5 3H17.25V2.25C17.25 2.05109 17.171 1.86032 17.0303 1.71967C16.8897 1.57902 16.6989 1.5 16.5 1.5C16.3011 1.5 16.1103 1.57902 15.9697 1.71967C15.829 1.86032 15.75 2.05109 15.75 2.25V3H8.25V2.25C8.25 2.05109 8.17098 1.86032 8.03033 1.71967C7.88968 1.57902 7.69891 1.5 7.5 1.5C7.30109 1.5 7.11032 1.57902 6.96967 1.71967C6.82902 1.86032 6.75 2.05109 6.75 2.25V3H4.5C4.10218 3 3.72064 3.15804 3.43934 3.43934C3.15804 3.72064 3 4.10218 3 4.5V19.5C3 19.8978 3.15804 20.2794 3.43934 20.5607C3.72064 20.842 4.10218 21 4.5 21H19.5C19.8978 21 20.2794 20.842 20.5607 20.5607C20.842 20.2794 21 19.8978 21 19.5V4.5C21 4.10218 20.842 3.72064 20.5607 3.43934C20.2794 3.15804 19.8978 3 19.5 3ZM6.75 4.5V5.25C6.75 5.44891 6.82902 5.63968 6.96967 5.78033C7.11032 5.92098 7.30109 6 7.5 6C7.69891 6 7.88968 5.92098 8.03033 5.78033C8.17098 5.63968 8.25 5.44891 8.25 5.25V4.5H15.75V5.25C15.75 5.44891 15.829 5.63968 15.9697 5.78033C16.1103 5.92098 16.3011 6 16.5 6C16.6989 6 16.8897 5.92098 17.0303 5.78033C17.171 5.63968 17.25 5.44891 17.25 5.25V4.5H19.5V7.5H4.5V4.5H6.75ZM19.5 19.5H4.5V9H19.5V19.5Z" fill="#4B5563"/></svg>,
      feedback: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.25 4.5H3.75003C3.3522 4.5 2.97067 4.65804 2.68937 4.93934C2.40806 5.22064 2.25003 5.60218 2.25003 6V21C2.24833 21.2859 2.32916 21.5662 2.48281 21.8074C2.63646 22.0485 2.85641 22.2401 3.11628 22.3594C3.31486 22.4516 3.53109 22.4996 3.75003 22.5C4.10215 22.4992 4.4426 22.3736 4.71096 22.1456L4.7194 22.1391L7.78128 19.5H20.25C20.6479 19.5 21.0294 19.342 21.3107 19.0607C21.592 18.7794 21.75 18.3978 21.75 18V6C21.75 5.60218 21.592 5.22064 21.3107 4.93934C21.0294 4.65804 20.6479 4.5 20.25 4.5ZM20.25 18H7.50003C7.31994 18.0001 7.1459 18.065 7.00971 18.1828L3.75003 21V6H20.25V18Z" fill="#4B5563"/></svg>,
      special_request: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.5306 5.46935L18.5306 2.46935C18.461 2.39962 18.3783 2.3443 18.2872 2.30656C18.1962 2.26882 18.0986 2.24939 18 2.24939C17.9014 2.24939 17.8038 2.26882 17.7128 2.30656C17.6217 2.3443 17.539 2.39962 17.4694 2.46935L8.46937 11.4694C8.39975 11.5391 8.34454 11.6218 8.3069 11.7128C8.26926 11.8039 8.24992 11.9015 8.25 12V15C8.25 15.1989 8.32902 15.3897 8.46967 15.5303C8.61032 15.671 8.80109 15.75 9 15.75H12C12.0985 15.7501 12.1961 15.7307 12.2871 15.6931C12.3782 15.6554 12.4609 15.6002 12.5306 15.5306L21.5306 6.53061C21.6004 6.46095 21.6557 6.37823 21.6934 6.28718C21.7312 6.19614 21.7506 6.09854 21.7506 5.99998C21.7506 5.90142 21.7312 5.80382 21.6934 5.71277C21.6557 5.62173 21.6004 5.53901 21.5306 5.46935Z" fill="#4B5563"/></svg>,
      
      document: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.0306 6.21938L16.2806 2.46938C16.2109 2.39975 16.1282 2.34454 16.0371 2.3069C15.9461 2.26926 15.8485 2.24992 15.75 2.25H8.25C7.85218 2.25 7.47064 2.40804 7.18934 2.68934C6.90804 2.97064 6.75 3.35218 6.75 3.75V5.25H5.25C4.85218 5.25 4.47064 5.40804 4.18934 5.68934C3.90804 5.97064 3.75 6.35218 3.75 6.75V20.25C3.75 20.6478 3.90804 21.0294 4.18934 21.3107C4.47064 21.592 4.85218 21.75 5.25 21.75H15.75C16.1478 21.75 16.5294 21.592 16.8107 21.3107C17.092 21.0294 17.25 20.6478 17.25 20.25V18.75H18.75C19.1478 18.75 19.5294 18.592 19.8107 18.3107C20.092 18.0294 20.25 17.6478 20.25 17.25V6.75C20.2501 6.65148 20.2307 6.55391 20.1931 6.46286C20.1555 6.37182 20.1003 6.28908 20.0306 6.21938Z" fill="#4B5563"/></svg>,
      // construction: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 4.49995V8.99995C21 9.19886 20.921 9.38962 20.7803 9.53028C20.6397 9.67093 20.4489 9.74995 20.25 9.74995H15.75C15.5511 9.74995 15.3603 9.67093 15.2197 9.53028C15.079 9.38962 15 9.19886 15 8.99
      user: <svg className="ml-1" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96451 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25Z" fill="#4B5563"/></svg>,
      referrals: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M20.25 6.74997H16.9613C16.9978 6.71903 17.0353 6.68903 17.0709 6.65622C17.3557 6.40326 17.5851 6.09427 17.745 5.74858C17.9049 5.40289 17.9917 5.02793 18 4.64715C18.0123 4.2306 17.9394 3.81592 17.7856 3.42858C17.6319 3.04124 17.4006 2.68941 17.106 2.39468C16.8113 2.09996 16.4596 1.86857 16.0723 1.71471C15.685 1.56085 15.2703 1.48778 14.8538 1.49997C14.4728 1.50817 14.0977 1.59492 13.7518 1.75479C13.406 1.91465 13.0968 2.14419 12.8438 2.42903C12.4936 2.83487 12.2089 3.29288 12 3.78653C11.7911 3.29288 11.5064 2.83487 11.1562 2.42903C10.9032 2.14419 10.594 1.91465 10.2482 1.75479C9.90232 1.59492 9.52718 1.50817 9.14625 1.49997C8.72969 1.48778 8.31503 1.56085 7.92774 1.71471C7.54044 1.86857 7.18868 2.09996 6.89405 2.39468C6.59941 2.68941 6.36812 3.04124 6.21438 3.42858C6.06064 3.81592 5.98768 4.2306 6 4.64715C6.00833 5.02793 6.09514 5.40289 6.255 5.74858C6.41486 6.09427 6.64434 6.40326 6.92906 6.65622C6.96469 6.68715 7.00219 6.71715 7.03875 6.74997H3.75C3.35218 6.74997 2.97064 6.908 2.68934 7.18931C2.40804 7.47061 2.25 7.85214 2.25 8.24997V11.25C2.25 11.6478 2.40804 12.0293 2.68934 12.3106C2.97064 12.5919 3.35218 12.75 3.75 12.75V18.75C3.75 19.1478 3.90804 19.5293 4.18934 19.8106C4.47064 20.0919 4.85218 20.25 5.25 20.25H18.75C19.1478 20.25 19.5294 20.0919 19.8107 19.8106C20.092 19.5293 20.25 19.1478 20.25 18.75V12.75C20.6478 12.75 21.0294 12.5919 21.3107 12.3106C21.592 12.0293 21.75 11.6478 21.75 11.25V8.24997C21.75 7.85214 21.592 7.47061 21.3107 7.18931C21.0294 6.908 20.6478 6.74997 20.25 6.74997Z" fill="#5D5D5D"/></svg>,
      support: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96451 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25Z" fill="#5D5D5D"/></svg>,
    };
    return icons[iconName] || null;
  };

  const sidebarStyle = {
    display: 'flex',
    width: '348px',
    height: '780px',
    padding: '48px 24px 36px 24px',
    flexDirection: 'column',
    justifyContent: 'space-between',
    alignItems: 'flex-start',
    background: 'var(--Base-White, #FFF)',
  };

  const navItemStyle = {
    display: 'flex',
    alignItems: 'center',
    gap: '12px',
    color: 'var(--Gray-500, #4B5563)',
    fontFamily: '"Plus Jakarta Sans", sans-serif',
    fontSize: '16px',
    fontStyle: 'normal',
    fontWeight: 500,
    lineHeight: '24px',
  };

  const activeNavItemStyle = {
    ...navItemStyle,
    backgroundColor: '#F3F4F6',
    borderRadius: '6px',
  };

  return (
    <aside style={sidebarStyle}>
      <div>
        <img src={Logo} alt="Logo" style={{ marginBottom: '24px' }} />
        <nav>
          {navItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              style={{
                ...navItemStyle,
                ...(isActive === item.path ? activeNavItemStyle : {}),
                textDecoration: 'none',
                padding: '12px',
                marginBottom: '8px',
                display: 'flex',
                alignItems: 'center',
              }}
              onClick={() => handleNavClick(item.path)}
            >
              {renderIcon(item.icon)}
              <span>{item.label}</span>
            </Link>
          ))}
        </nav>
      </div>
      <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
          <rect width="48" height="48" rx="24" fill="url(#paint0_linear_131_506)"/>
          <text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fill="white" fontFamily="Arial, sans-serif" fontSize="20" fontWeight="bold">
            JD
          </text>
          <defs>
            <linearGradient id="paint0_linear_131_506" x1="24" y1="0" x2="24" y2="48" gradientUnits="userSpaceOnUse">
              <stop stopColor="#AA9EF1"/>
              <stop offset="1" stopColor="#7E35C7"/>
            </linearGradient>
          </defs>
        </svg>
        <div style={{ display: 'flex', flexDirection: 'column' }}>
          <span style={{ fontWeight: 'bold' }}>John Doe</span>
          <span style={{ color: '#667085' }}>admin</span>
        </div>
        <Link to="/login" onClick={handleLogout}>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 17L21 12M21 12L16 7M21 12H9M9 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H9" stroke="#667085" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
        </Link>
      </div>
    </aside>
  );
};

export default NewSideBar;